// Compiled by ClojureScript 1.7.170 {}
goog.provide('slides_mount.show');
goog.require('cljs.core');
goog.require('jobim.core');
goog.require('slides_mount.components');
slides_mount.show.my_show = jobim.core.slide_show.call(null,jobim.core.default_style,jobim.core.__GT_Title.call(null,"Mount, Integrant and Component","Chris Murphy"),slides_mount.components.__GT_Points.call(null,new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, ["Doing it yourself, Stuart Sierra","Component, Stuart Sierra - juxt/Modular","Mount, Anatoly Polinsky (tolitius) - Luminus","Integrant, James Reeves (weavejester) - Duct"], null)),slides_mount.components.__GT_Points.call(null,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, ["Static Config: connection URL, username, password, API keys","External Resources: connection, session, file handle","Process state: atom, core.async channel, pipeline"], null)),slides_mount.components.__GT_Points.call(null,new cljs.core.PersistentVector(null, 7, 5, cljs.core.PersistentVector.EMPTY_NODE, ["Startup time JVM + Clojure + libs. Want keep REPL live","All achieve 'clean initial state' in REPL","Dependency Ordering and Dependency Injection (DI)","By stopping and starting all 'stateful resources' in dependency order","Schedulers, web-servers, caches, counters","All program entry points are stateful","Graph, in same way your program's namespaces make up a graph"], null)),jobim.core.__GT_CaptionedPic.call(null,"/pictures/DAG.png","DAG"),jobim.core.__GT_CaptionedPic.call(null,"/pictures/topological.png","Topological"),jobim.core.__GT_ClojureCode.call(null,cljs.core.list(cljs.core.list(new cljs.core.Symbol(null,"defn","defn",-126010802,null),new cljs.core.Symbol(null,"start","start",1285322546,null),cljs.core.PersistentVector.EMPTY,cljs.core.list(new cljs.core.Symbol(null,"->","->",-2139605430,null),cljs.core.PersistentArrayMap.EMPTY,new cljs.core.Symbol(null,"start-db","start-db",1142711345,null),new cljs.core.Symbol(null,"start-queues","start-queues",-1482687841,null),new cljs.core.Symbol(null,"start-thread-pool","start-thread-pool",116749409,null),new cljs.core.Symbol(null,"start-web-server","start-web-server",-1221129265,null)))),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"length","length",588987862),(0)], null),(40)),slides_mount.components.__GT_Points.call(null,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, ["Reloadable assumption (clojure.tools.namespace.repl/refresh)"], null)),jobim.core.__GT_ClojureCode.call(null,cljs.core.list(cljs.core.list(new cljs.core.Symbol(null,"defn","defn",-126010802,null),new cljs.core.Symbol(null,"restart","restart",-139352085,null),"Stop, refresh, and restart the server.",cljs.core.PersistentVector.EMPTY,cljs.core.list(new cljs.core.Symbol(null,"stop","stop",-500379815,null)),cljs.core.list(new cljs.core.Symbol(null,"refresh","refresh",-707020244,null),new cljs.core.Keyword(null,"after","after",594996914),cljs.core.list(new cljs.core.Symbol(null,"quote","quote",1377916282,null),new cljs.core.Symbol("user","go","user/go",1506754467,null))))),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"length","length",588987862),(0)], null),(40)),jobim.core.__GT_ClojureCode.call(null,cljs.core.list(cljs.core.list(new cljs.core.Symbol(null,"ns","ns",2082130287,null),new cljs.core.Symbol(null,"user","user",-1122004413,null),cljs.core.list(new cljs.core.Keyword(null,"require","require",-468001333),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"clojure.tools.namespace.repl","clojure.tools.namespace.repl",1379972636,null),new cljs.core.Keyword(null,"as","as",1148689641),new cljs.core.Symbol(null,"tools-ns","tools-ns",-140168954,null)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"mount.core","mount.core",-1396789343,null),new cljs.core.Keyword(null,"as","as",1148689641),new cljs.core.Symbol(null,"mount","mount",79949057,null)], null),new cljs.core.Symbol(null,"entry.defstate.one","entry.defstate.one",354995544,null),new cljs.core.Symbol(null,"entry.defstate.two","entry.defstate.two",260262156,null))),new cljs.core.Symbol(null,">->",">->",935171433,null),cljs.core.list(new cljs.core.Symbol(null,"defn","defn",-126010802,null),new cljs.core.Symbol(null,"go","go",1493584872,null),cljs.core.PersistentVector.EMPTY,cljs.core.list(new cljs.core.Symbol("mount","start","mount/start",852013917,null)),new cljs.core.Keyword(null,"ready","ready",1086465795)),cljs.core.list(new cljs.core.Symbol(null,"defn","defn",-126010802,null),new cljs.core.Symbol(null,"restart","restart",-139352085,null),"Stop, refresh, and restart the server.",cljs.core.PersistentVector.EMPTY,cljs.core.list(new cljs.core.Symbol("mount","stop","mount/stop",-401044622,null)),cljs.core.list(new cljs.core.Symbol("tools-ns","refresh","tools-ns/refresh",525244213,null),new cljs.core.Keyword(null,"after","after",594996914),cljs.core.list(new cljs.core.Symbol(null,"quote","quote",1377916282,null),new cljs.core.Symbol("user","go","user/go",1506754467,null))))),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"length","length",588987862),(0)], null),(100)),jobim.core.__GT_ClojureCode.call(null,cljs.core.list(cljs.core.list(new cljs.core.Symbol(null,"ns","ns",2082130287,null),new cljs.core.Symbol(null,"app.config","app.config",1384022501,null),cljs.core.list(new cljs.core.Keyword(null,"require","require",-468001333),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"mount.core","mount.core",-1396789343,null),new cljs.core.Keyword(null,"refer","refer",-964295553),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"defstate","defstate",-1553343902,null)], null)], null))),new cljs.core.Symbol(null,">->",">->",935171433,null),cljs.core.list(new cljs.core.Symbol(null,"defstate","defstate",-1553343902,null),new cljs.core.Symbol(null,"config","config",-1659574354,null),new cljs.core.Keyword(null,"start","start",-355208981),cljs.core.list(new cljs.core.Symbol(null,"load-config","load-config",599298217,null),"config.edn"))),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"length","length",588987862),(0)], null),(56)),jobim.core.__GT_ClojureCode.call(null,cljs.core.list(cljs.core.list(new cljs.core.Symbol(null,"ns","ns",2082130287,null),new cljs.core.Symbol(null,"app.database","app.database",-1788583610,null),cljs.core.list(new cljs.core.Keyword(null,"require","require",-468001333),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"mount.core","mount.core",-1396789343,null),new cljs.core.Keyword(null,"refer","refer",-964295553),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"defstate","defstate",-1553343902,null)], null)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"app.config","app.config",1384022501,null),new cljs.core.Keyword(null,"as","as",1148689641),new cljs.core.Symbol(null,"config","config",-1659574354,null)], null))),new cljs.core.Symbol(null,">->",">->",935171433,null),cljs.core.list(new cljs.core.Symbol(null,"defstate","defstate",-1553343902,null),new cljs.core.Symbol(null,"conn","conn",1918841190,null),new cljs.core.Keyword(null,"start","start",-355208981),cljs.core.list(new cljs.core.Symbol(null,"create-connection","create-connection",1613800414,null),new cljs.core.Symbol("config","config","config/config",1842641512,null)))),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"length","length",588987862),(0)], null),(50)),slides_mount.components.__GT_Points.call(null,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, ["Demo changing config.edn for Mount"], null)),slides_mount.components.__GT_Points.call(null,new cljs.core.PersistentVector(null, 5, 5, cljs.core.PersistentVector.EMPTY_NODE, ["Integrant (considered from Mount pov)","Data structure where references between keywords replace requires between defstate symbols","config.edn - not just configuration, but dependency info as well","Still :start and :stop functions have to be code","So each stateful resource must at least implement ig/init-key multimethod, ig/halt-key .."], null)),jobim.core.__GT_ClojureCode.call(null,cljs.core.list(new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword("adapter","jetty","adapter/jetty",-153925246),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"port","port",1534937262),(8080),new cljs.core.Keyword(null,"handler","handler",-195596612),"#ig/ref :handler/greet"], null),new cljs.core.Keyword("handler","greet","handler/greet",910208020),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"name","name",1843675177),"Alice"], null)], null)),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"length","length",588987862),(0)], null),(50)),jobim.core.__GT_ClojureCode.call(null,cljs.core.list(cljs.core.list(new cljs.core.Symbol(null,"defmethod","defmethod",-579171823,null),new cljs.core.Symbol("ig","init-key","ig/init-key",2136875545,null),new cljs.core.Keyword("adapter","jetty","adapter/jetty",-153925246),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"_","_",-1201019570,null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"keys","keys",1068423698),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"handler","handler",1444934915,null)], null),new cljs.core.Keyword(null,"as","as",1148689641),new cljs.core.Symbol(null,"opts","opts",1795607228,null)], null)], null),cljs.core.list(new cljs.core.Symbol("jetty","run-jetty","jetty/run-jetty",66464230,null),new cljs.core.Symbol(null,"handler","handler",1444934915,null),cljs.core.list(new cljs.core.Symbol(null,"->","->",-2139605430,null),new cljs.core.Symbol(null,"opts","opts",1795607228,null),cljs.core.list(new cljs.core.Symbol(null,"dissoc","dissoc",1039760994,null),new cljs.core.Keyword(null,"handler","handler",-195596612)),cljs.core.list(new cljs.core.Symbol(null,"assoc","assoc",2071440380,null),new cljs.core.Keyword(null,"join?","join?",-1731053614),false)))),cljs.core.list(new cljs.core.Symbol(null,"defmethod","defmethod",-579171823,null),new cljs.core.Symbol("ig","init-key","ig/init-key",2136875545,null),new cljs.core.Keyword("handler","greet","handler/greet",910208020),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"_","_",-1201019570,null),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"keys","keys",1068423698),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"name","name",-810760592,null)], null)], null)], null),cljs.core.list(new cljs.core.Symbol(null,"fn","fn",465265323,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"_","_",-1201019570,null)], null),cljs.core.list(new cljs.core.Symbol("resp","response","resp/response",576130679,null),cljs.core.list(new cljs.core.Symbol(null,"str","str",-1564826950,null),"Hello ",new cljs.core.Symbol(null,"name","name",-810760592,null))))),cljs.core.list(new cljs.core.Symbol(null,"defmethod","defmethod",-579171823,null),new cljs.core.Symbol("ig","halt-key!","ig/halt-key!",-508945441,null),new cljs.core.Keyword("adapter","jetty","adapter/jetty",-153925246),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"_","_",-1201019570,null),new cljs.core.Symbol(null,"server","server",-1155245649,null)], null),cljs.core.list(new cljs.core.Symbol(null,".stop",".stop",1463610239,null),new cljs.core.Symbol(null,"server","server",-1155245649,null)))),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"length","length",588987862),(0)], null),(100)),jobim.core.__GT_CaptionedPic.call(null,"/pictures/Integrant.png","Integrant"),slides_mount.components.__GT_Points.call(null,new cljs.core.PersistentVector(null, 6, 5, cljs.core.PersistentVector.EMPTY_NODE, ["Component (considered from Integrant pov)","Also has a 'system', so is also 'top-loading'","Whole system does not come from config.edn, but done in code (unless use Schematic)","Also uses keywords as placeholders for stateful resources","defrecords required to implement Lifecycle protocol - too much indirection"," (No requirement to use protocols with either Integrant or Mount)"], null)),slides_mount.components.__GT_Points.call(null,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, ["a configuration value set up at creation time","some internal value that is irrelevant to the user of the component","a dependency (which will refer to another component when the system is started)"], null)),jobim.core.__GT_CaptionedPic.call(null,"/pictures/NewAutoInvoice.png","Different types of state in a Component"),jobim.core.__GT_ClojureCode.call(null,cljs.core.list(cljs.core.list(new cljs.core.Symbol(null,"defn","defn",-126010802,null),new cljs.core.Symbol(null,"create-sms-sender-hof","create-sms-sender-hof",-778220121,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"keys","keys",1068423698),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"sid","sid",-839419355,null),new cljs.core.Symbol(null,"auth-token","auth-token",1671522503,null)], null)], null)], null),cljs.core.list(new cljs.core.Symbol(null,"fn","fn",465265323,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"keys","keys",1068423698),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"from","from",-839142725,null),new cljs.core.Symbol(null,"to","to",1832630534,null),new cljs.core.Symbol(null,"body","body",-408674142,null)], null)], null)], null),cljs.core.list(new cljs.core.Symbol("twilio","with-auth","twilio/with-auth",656913296,null),new cljs.core.Symbol(null,"sid","sid",-839419355,null),new cljs.core.Symbol(null,"auth-token","auth-token",1671522503,null),cljs.core.list(new cljs.core.Symbol("twilio","send-sms","twilio/send-sms",-1303175872,null),cljs.core.list(new cljs.core.Symbol("twilio","sms","twilio/sms",-79990591,null),new cljs.core.Symbol(null,"from","from",-839142725,null),new cljs.core.Symbol(null,"to","to",1832630534,null),new cljs.core.Symbol(null,"body","body",-408674142,null)))))),new cljs.core.Symbol(null,">->",">->",935171433,null),cljs.core.list(new cljs.core.Symbol(null,"defstate","defstate",-1553343902,null),new cljs.core.Symbol(null,"send-sms","send-sms",1725999828,null),new cljs.core.Keyword(null,"start","start",-355208981),cljs.core.list(new cljs.core.Symbol(null,"create-sms-sender-hof","create-sms-sender-hof",-778220121,null),cljs.core.list(new cljs.core.Keyword(null,"sms","sms",1841511414),new cljs.core.Symbol(null,"config","config",-1659574354,null))))),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"length","length",588987862),(0)], null),(50)),jobim.core.__GT_ClojureCode.call(null,cljs.core.list(cljs.core.list(new cljs.core.Symbol(null,"defn","defn",-126010802,null),new cljs.core.Symbol(null,"create-sms-sender-hof","create-sms-sender-hof",-778220121,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"keys","keys",1068423698),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"sid","sid",-839419355,null),new cljs.core.Symbol(null,"auth-token","auth-token",1671522503,null)], null)], null)], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"send","send",-652151114),cljs.core.list(new cljs.core.Symbol(null,"fn","fn",465265323,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"keys","keys",1068423698),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"from","from",-839142725,null),new cljs.core.Symbol(null,"to","to",1832630534,null),new cljs.core.Symbol(null,"body","body",-408674142,null)], null)], null)], null),cljs.core.list(new cljs.core.Symbol("twilio","with-auth","twilio/with-auth",656913296,null),new cljs.core.Symbol(null,"sid","sid",-839419355,null),new cljs.core.Symbol(null,"auth-token","auth-token",1671522503,null),cljs.core.list(new cljs.core.Symbol("twilio","send-sms","twilio/send-sms",-1303175872,null),cljs.core.list(new cljs.core.Symbol("twilio","sms","twilio/sms",-79990591,null),new cljs.core.Symbol(null,"from","from",-839142725,null),new cljs.core.Symbol(null,"to","to",1832630534,null),new cljs.core.Symbol(null,"body","body",-408674142,null))))),new cljs.core.Keyword(null,"get-sent","get-sent",-1137618829),cljs.core.list(new cljs.core.Symbol(null,"fn","fn",465265323,null),cljs.core.PersistentVector.EMPTY,cljs.core.list(new cljs.core.Symbol("twilio","with-auth","twilio/with-auth",656913296,null),new cljs.core.Symbol(null,"sid","sid",-839419355,null),new cljs.core.Symbol(null,"auth-token","auth-token",1671522503,null),cljs.core.list(new cljs.core.Symbol("twilio","get-messages","twilio/get-messages",-975551517,null))))], null))),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"length","length",588987862),(0)], null),(70)),slides_mount.components.__GT_Points.call(null,new cljs.core.PersistentVector(null, 7, 5, cljs.core.PersistentVector.EMPTY_NODE, ["Keep hierarchy (tree) as flat as possible (for example if need to combine two or more)","Obvious start","One state per external entity","Be course grained eg. whole pipeline rather than the channels that make it up","Depending on a stateful resource is not a good enough reason to be one","Sometimes dependency cycles make sense","Never need to refer to the whole system from a stateful resource"], null)),jobim.core.__GT_Title.call(null,"END",""));

//# sourceMappingURL=show.js.map